import React, { useState } from "react";
import { AnimatePresence, motion, useAnimation } from "framer-motion";
import { LogoReveal, CircleReveal } from "@/helpers/transitions";
import { useRouter } from "next/router";

export default function Intro() {
  const PATH_LENGTH = 1237; // length of the path
  const HOME_ROUTE = "/home"; 
  const router = useRouter();
  const redirectToHome = () => {
    router.push(HOME_ROUTE);
  };
  const paths = [
    "M356.466 238.224C356.466 241.776 359.138 244.208 362.466 244.208C365.778 244.208 368.45 241.776 368.45 238.224C368.45 234.656 365.778 232.192 362.466 232.192C359.138 232.192 356.466 234.656 356.466 238.224ZM357.794 238.224C357.794 235.36 359.842 233.408 362.466 233.408C365.138 233.408 367.122 235.36 367.122 238.224C367.122 241.04 365.138 243.008 362.466 243.008C359.842 243.008 357.794 241.04 357.794 238.224ZM362.482 240.096C361.586 240.096 360.994 239.424 360.994 238.208C360.994 236.944 361.65 236.32 362.482 236.32C363.298 236.32 363.842 236.912 363.954 237.664L365.602 237.264C365.346 235.904 364.066 234.944 362.482 234.944C360.514 234.944 359.218 236.24 359.218 238.208C359.218 240.112 360.418 241.504 362.434 241.504C364.098 241.504 365.298 240.576 365.666 239.248L364.002 238.88C363.826 239.776 363.234 240.096 362.482 240.096Z",
    "M296.268 244H327.852C344.748 244 355.98 238.24 355.98 222.592C355.98 214.144 351.468 209.248 344.94 206.944C350.412 203.584 353.196 198.688 353.196 192.448C353.196 177.856 341.868 174.4 326.604 174.4H296.268V244ZM312.684 214.432H328.044C335.052 214.432 338.604 217.408 338.604 222.304C338.604 227.2 335.052 230.176 328.044 230.176H312.684V214.432ZM312.684 188.224H327.18C332.94 188.224 336.108 190.816 336.108 195.136C336.108 199.456 332.94 202.24 327.18 202.24H312.684V188.224Z",
    "M231.301 244H248.773L252.901 231.616H279.781L284.005 244H301.861L275.557 174.4H257.509L231.301 244ZM266.437 191.776L275.365 218.272H257.413L266.437 191.776Z",
    "M216.039 174.4H199.623V244H249.447V229.504H216.039V174.4Z",
    "M169.199 245.248C188.687 245.248 198.959 231.328 198.959 209.056C198.959 186.88 188.687 173.248 169.199 173.248C149.615 173.248 139.343 186.88 139.343 209.056C139.343 231.328 149.615 245.248 169.199 245.248ZM169.199 233.536C161.039 233.536 155.567 225.952 155.567 209.056C155.567 192.256 161.039 184.96 169.199 184.96C177.263 184.96 182.735 192.256 182.735 209.056C182.735 225.952 177.263 233.536 169.199 233.536Z",
    "M119.824 232.536C113.68 232.536 108.592 229.656 107.152 221.592H91.8882C94.1922 236.472 105.712 244.248 120.016 244.248C135.28 244.248 148.432 235.896 148.432 219.96C148.432 203.832 136.528 195.672 123.952 195.672C119.056 195.672 113.488 197.016 110.128 199.32L111.76 186.264H145.168V173.4H98.6082L93.7122 212.856L108.208 214.296C110.704 209.688 114.64 207.384 120.112 207.384C126.256 207.384 132.112 211.512 132.112 220.056C132.112 228.12 126.832 232.536 119.824 232.536Z",
    "M72.3388 232.536C66.1948 232.536 60.4348 229.368 59.3788 221.208H43.6348C45.4588 237.336 58.2268 244.248 72.0508 244.248C86.6428 244.248 99.6988 237.048 99.6988 222.744C99.6988 216.312 95.7628 209.016 88.8508 206.232C93.7468 203.448 98.5468 197.688 98.5468 190.392C98.5468 177.72 85.3948 172.248 73.1068 172.248C59.0908 172.248 46.0348 178.392 44.4988 193.656H60.1468C61.2028 186.264 66.3868 183.96 72.3388 183.96C77.5228 183.96 82.6108 186.648 82.6108 191.736C82.6108 197.88 77.1388 200.856 68.0188 200.856H63.8908V213.912H68.4988C77.4268 213.912 83.4748 216.696 83.4748 222.84C83.4748 229.272 79.2508 232.536 72.3388 232.536Z",
  ];
  const [animationFinished, setAnimationFinished] = useState(false);
  

  const onAnimationComplete = () => {
    setAnimationFinished(true);
   if(animationFinished){
    redirectToHome();
   }
  };
  return (
    <AnimatePresence exitBeforeEnter>
      <motion.div
        className="flex flex-col justify-center items-center h-screen bg-black"
        initial={{ opacity: 1 }}
        animate={{
          opacity: animationFinished ? 0 : 1,
          transition: {
            duration: 1.5,
          },
        }}
        onAnimationComplete={onAnimationComplete}
      >
        <motion.div className=" relative">
          <motion.svg
            width="157"
            height="157"
            viewBox="0 0 397 397"
            fill="none"
          >
            <motion.circle
              cx="198.5"
              cy="198.5"
              r="197"
              fill="transparent"
              stroke="white"
              strokeWidth="2px"
              strokeDasharray={PATH_LENGTH}
              strokeDashoffset={PATH_LENGTH}
              animate={{ strokeDashoffset: 0 }}
              transition={{
                duration: 1.2,
                ease: [0.17, 0.84, 0.44, 1],
                delay: 1,
              }}
            />

            {paths.map((path, index) => {
              return (
                <>
                  <motion.path
                    d={path}
                    fill="#FDFBEE"
                    fill-opacity="0.7"
                    variants={LogoReveal}
                    initial="hidden"
                    animate="visible"
                  />
                </>
              );
            })}
          </motion.svg>
          <div className=" h-[1px] w-full"></div>
        </motion.div>
      </motion.div>
    </AnimatePresence>
  );
}
